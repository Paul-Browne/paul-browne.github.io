/*! Twitter Post Fetcher v13.0 | Coded by Jason Mayes 2015. A present to all the developers out there. | www.jasonmayes.com | Please keep this disclaimer with my code if you use it. Thanks. :-) | http://www.jasonmayes.com/projects/twitterApi/ | Github: https://github.com/jasonmayes/Twitter-Post-Fetcher */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():b()}(this,function(){function p(b){if(null===k){for(var c=b.length,d=0,e=document.getElementById(a),f="<ul>";c>d;)f+="<li>"+b[d]+"</li>",d++;f+="</ul>",e.innerHTML=f}else k(b)}function q(a){return a.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,b){return b}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function r(a){for(var b=a.getElementsByTagName("a"),c=b.length-1;c>=0;c--)b[c].setAttribute("target","_blank")}function s(a,b){for(var c=[],d=new RegExp("(^| )"+b+"( |$)"),e=a.getElementsByTagName("*"),f=0,g=e.length;g>f;f++)d.test(e[f].className)&&c.push(e[f]);return c}function t(a){if(void 0!==a){var b=a.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0];return decodeURIComponent(b).split('"')[1]}}var a="",b=20,c=!0,d=[],e=!1,f=!0,g=!0,h=null,i=!0,j=!0,k=null,l=!0,m=!1,n=!0,o="en",u={fetch:function(i){if(void 0===i.maxTweets&&(i.maxTweets=20),void 0===i.enableLinks&&(i.enableLinks=!0),void 0===i.showUser&&(i.showUser=!0),void 0===i.showTime&&(i.showTime=!0),void 0===i.dateFunction&&(i.dateFunction="default"),void 0===i.showRetweet&&(i.showRetweet=!0),void 0===i.customCallback&&(i.customCallback=null),void 0===i.showInteraction&&(i.showInteraction=!0),void 0===i.showImages&&(i.showImages=!1),void 0===i.linksInNewWindow&&(i.linksInNewWindow=!0),e)d.push(i);else{e=!0,a=i.domId,b=i.maxTweets,c=i.enableLinks,g=i.showUser,f=i.showTime,j=i.showRetweet,h=i.dateFunction,k=i.customCallback,l=i.showInteraction,m=i.showImages,n=i.linksInNewWindow;var p=document.createElement("script");p.type="text/javascript",p.src="//cdn.syndication.twimg.com/widgets/timelines/"+i.id+"?&lang="+(i.lang||o)+"&callback=twitterFetcher.callback&"+"suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(p)}},callback:function(a){var k=document.createElement("div");k.innerHTML=a.body,"undefined"==typeof k.getElementsByClassName&&(i=!1);var o=[],v=[],w=[],x=[],y=[],z=[],A=0;if(i)for(var B=k.getElementsByClassName("tweet");A<B.length;)B[A].getElementsByClassName("retweet-credit").length>0?y.push(!0):y.push(!1),(!y[A]||y[A]&&j)&&(o.push(B[A].getElementsByClassName("e-entry-title")[0]),z.push(B[A].getAttribute("data-tweet-id")),v.push(B[A].getElementsByClassName("p-author")[0]),w.push(B[A].getElementsByClassName("dt-updated")[0]),void 0!==B[A].getElementsByClassName("inline-media")[0]?x.push(B[A].getElementsByClassName("inline-media")[0]):x.push(void 0)),A++;else for(var B=s(k,"tweet");A<B.length;)o.push(s(B[A],"e-entry-title")[0]),z.push(B[A].getAttribute("data-tweet-id")),v.push(s(B[A],"p-author")[0]),w.push(s(B[A],"dt-updated")[0]),void 0!==s(B[A],"inline-media")[0]?x.push(s(B[A],"inline-media")[0]):x.push(void 0),s(B[A],"retweet-credit").length>0?y.push(!0):y.push(!1),A++;o.length>b&&(o.splice(b,o.length-b),v.splice(b,v.length-b),w.splice(b,w.length-b),y.splice(b,y.length-b),x.splice(b,x.length-b));for(var C=[],A=o.length,D=0;A>D;){if("string"!=typeof h){var E=w[D].getAttribute("datetime"),F=new Date(w[D].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),G=h(F,E);if(w[D].setAttribute("aria-label",G),o[D].innerText)if(i)w[D].innerText=G;else{var H=document.createElement("p"),I=document.createTextNode(G);H.appendChild(I),H.setAttribute("aria-label",G),w[D]=H}else w[D].textContent=G}var J="";c?(n&&(r(o[D]),g&&r(v[D])),g&&(J+='<div class="user">'+q(v[D].innerHTML)+"</div>"),J+='<p class="tweet">'+q(o[D].innerHTML)+"</p>",f&&(J+='<p class="timePosted">'+w[D].getAttribute("aria-label")+"</p>")):o[D].innerText?(g&&(J+='<p class="user">'+v[D].innerText+"</p>"),J+='<p class="tweet">'+o[D].innerText+"</p>",f&&(J+='<p class="timePosted">'+w[D].innerText+"</p>")):(g&&(J+='<p class="user">'+v[D].textContent+"</p>"),J+='<p class="tweet">'+o[D].textContent+"</p>",f&&(J+='<p class="timePosted">'+w[D].textContent+"</p>")),l&&(J+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+z[D]+'" class="twitter_reply_icon"'+(n?' target="_blank">':">")+'<span class="icon-reply"></span></a>&nbsp;&nbsp;<a href="https://twitter.com/intent/retweet?tweet_id='+z[D]+'" class="twitter_retweet_icon"'+(n?' target="_blank">':">")+'<span class="icon-retweet"></span></a>&nbsp;&nbsp;'+'<a href="https://twitter.com/intent/favorite?tweet_id='+z[D]+'" class="twitter_fav_icon"'+(n?' target="_blank">':">")+'<span class="icon-star"></span></a></p>'),m&&void 0!==x[D]&&(J+='<div class="media"><img src="'+t(x[D])+'" alt="Image from tweet" />'+"</div>"),C.push(J),D++}p(C),e=!1,d.length>0&&(u.fetch(d[0]),d.splice(0,1))}};return window.twitterFetcher=u,u});
